{"ast":null,"code":"import { createStore } from 'vuex';\nexport default createStore({\n  state: {\n    films: [],\n    actors: [],\n    add: null,\n    allActors: []\n  },\n  getters: {\n    getFilms(state) {\n      return state.films;\n    },\n    getActors(state) {\n      return state.actors;\n    },\n    getAllActors(state) {\n      return state.allActors;\n    }\n  },\n  mutations: {\n    setFilms(state, payload) {\n      state.films = payload;\n    },\n    setActors(state, payload) {\n      state.actors = payload;\n    },\n    setAdd(state, payload) {\n      state.add = payload;\n    },\n    setAllActors(state, payload) {\n      state.allActors = payload;\n    }\n  },\n  actions: {\n    async getFilms({\n      commit\n    }) {\n      const response = await fetch(`http://127.0.0.1:8080/films`, {\n        method: 'GET'\n      });\n      let res = await response.json();\n      console.log(res);\n      commit('setFilms', res);\n    },\n    async getActors({\n      commit\n    }, payload) {\n      const response = await fetch(`http://127.0.0.1:8080/actors?filmId=${payload.filmId}`, {\n        method: 'GET'\n      });\n      let res = await response.json();\n      console.log(res);\n      commit('setActors', res);\n    },\n    async getAllActors({\n      commit\n    }) {\n      const response = await fetch(`http://127.0.0.1:8080/actors`, {\n        method: 'GET'\n      });\n      let res = await response.json();\n      console.log(res);\n      commit('setAllActors', res);\n    },\n    async addNew({\n      commit\n    }, payload) {\n      const response = await fetch(`http://127.0.0.1:8080/films`, {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          selectedActorId: payload.selectedActorId,\n          filmName: payload.name,\n          filmingPercentage: payload.percentage,\n          genre: payload.genre,\n          duration: payload.duration,\n          rating: payload.rating,\n          budgetNum: payload.budget,\n          boxOfficeNum: payload.box_office,\n          filmDate: payload.date\n        })\n      });\n      let res = await response.json();\n      if (res.error) {\n        alert(res.error);\n      } else {\n        alert(\"Film added succesfully\");\n        commit('setAdd', 1);\n      }\n    }\n  },\n  modules: {}\n});","map":{"version":3,"names":["createStore","state","films","actors","add","allActors","getters","getFilms","getActors","getAllActors","mutations","setFilms","payload","setActors","setAdd","setAllActors","actions","commit","response","fetch","method","res","json","console","log","filmId","addNew","headers","body","JSON","stringify","selectedActorId","filmName","name","filmingPercentage","percentage","genre","duration","rating","budgetNum","budget","boxOfficeNum","box_office","filmDate","date","error","alert","modules"],"sources":["E:/ХНУРЕ/3 курс/СРБД/yevhen.tkachenko.sdbs.vue/sdbs-lab3/src/store/index.js"],"sourcesContent":["import { createStore } from 'vuex'\n\nexport default createStore({\n  state: {\n    films:[],\n    actors:[],\n    add:null,\n    allActors:[]\n  },\n  getters: {\n    getFilms(state){\n      return state.films\n    },\n    getActors(state){\n      return state.actors\n    },\n    getAllActors(state){\n      return state.allActors\n    },\n  },\n  mutations: {\n    setFilms(state,payload){\n      state.films = payload\n    },\n    setActors(state,payload){\n      state.actors = payload\n    },\n    setAdd(state,payload){\n      state.add = payload\n    },\n    setAllActors(state,payload){\n      state.allActors = payload\n    }\n  },\n  actions: {\n    async getFilms({ commit }) {\n      const response = await fetch(`http://127.0.0.1:8080/films`, {\n              method: 'GET',\n            });\n            let res = await response.json()\n            console.log(res)\n            commit('setFilms',res)\n    },\n    async getActors({ commit },payload) {\n      const response = await fetch(`http://127.0.0.1:8080/actors?filmId=${payload.filmId}`, {\n              method: 'GET',\n            });\n            let res = await response.json()\n            console.log(res)\n            commit('setActors',res)\n    },\n    async getAllActors({ commit }) {\n      const response = await fetch(`http://127.0.0.1:8080/actors`, {\n              method: 'GET',\n            });\n            let res = await response.json()\n            console.log(res)\n            commit('setAllActors',res)\n    },\n    async addNew({commit},payload) {\n\n      const response = await fetch(`http://127.0.0.1:8080/films`, {\n              method: \"POST\",\n              headers: { \"Content-Type\": \"application/json\" },\n              body: JSON.stringify({\n                selectedActorId:payload.selectedActorId,\n                filmName:payload.name,\n                filmingPercentage:payload.percentage,\n                genre:payload.genre,\n                duration:payload.duration,\n                rating:payload.rating,\n                budgetNum:payload.budget,\n                boxOfficeNum:payload.box_office,\n                filmDate:payload.date,\n              }),\n            });\n            let res = await response.json()\n            if(res.error){\n              alert(res.error)\n            }else{\n              alert(\"Film added succesfully\")\n              commit('setAdd',1)\n            }\n      \n    },\n  },\n  modules: {\n  }\n})\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}