{"ast":null,"code":"import { createStore } from 'vuex';\nexport default createStore({\n  state: {\n    films: [],\n    actors: [],\n    add: null,\n    allActors: []\n  },\n  getters: {\n    getFilms(state) {\n      return state.films;\n    },\n    getActors(state) {\n      return state.actors;\n    },\n    getAllActors(state) {\n      return state.allActors;\n    }\n  },\n  mutations: {\n    setFilms(state, payload) {\n      state.films = payload;\n    },\n    setActors(state, payload) {\n      state.actors = payload;\n    },\n    setAdd(state, payload) {\n      state.add = payload;\n    },\n    setAllActors(state, payload) {\n      state.allActors = payload;\n    }\n  },\n  actions: {\n    async getFilms({\n      commit\n    }) {\n      await fetch(`http://127.0.0.1:8080/films`, {\n        method: 'GET'\n      });\n      commit('setFilms', []);\n    },\n    async getActors({\n      commit\n    }, payload) {\n      const response = await fetch(`http://127.0.0.1:8080/actors?filmId=${payload.filmId}`, {\n        method: 'GET'\n      });\n      let res = await response.json();\n      console.log(res);\n      commit('setActors', res);\n    },\n    async getAllActors({\n      commit\n    }) {\n      const response = await fetch(`http://127.0.0.1:8080/actors`, {\n        method: 'GET'\n      });\n      let res = await response.json();\n      console.log(res);\n      commit('setAllActors', res);\n    },\n    async addNew({\n      commit\n    }, payload) {\n      const response = await fetch(`http://127.0.0.1:8080/films`, {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          film_name: payload.name,\n          filming_procentage: payload.procentage,\n          genre: payload.genre,\n          dauration: payload.duration,\n          rating: payload.rating,\n          budget_num: payload.budget,\n          box_office_num: payload.box_office,\n          film_date: payload.date\n        })\n      });\n      let res = await response.json();\n      if (res.detail != \"Name nust be unique\") {\n        alert(\"New film added\");\n        commit('setAdd', 1);\n      } else {\n        alert(\"Name nust be unique\");\n      }\n    }\n  },\n  modules: {}\n});","map":{"version":3,"names":["createStore","state","films","actors","add","allActors","getters","getFilms","getActors","getAllActors","mutations","setFilms","payload","setActors","setAdd","setAllActors","actions","commit","fetch","method","response","filmId","res","json","console","log","addNew","headers","body","JSON","stringify","film_name","name","filming_procentage","procentage","genre","dauration","duration","rating","budget_num","budget","box_office_num","box_office","film_date","date","detail","alert","modules"],"sources":["E:/ХНУРЕ/3 курс/СРБД/yevhen.tkachenko.sdbs.vue/sdbs-lab3/src/store/index.js"],"sourcesContent":["import { createStore } from 'vuex'\n\nexport default createStore({\n  state: {\n    films:[],\n    actors:[],\n    add:null,\n    allActors:[]\n  },\n  getters: {\n    getFilms(state){\n      return state.films\n    },\n    getActors(state){\n      return state.actors\n    },\n    getAllActors(state){\n      return state.allActors\n    },\n  },\n  mutations: {\n    setFilms(state,payload){\n      state.films = payload\n    },\n    setActors(state,payload){\n      state.actors = payload\n    },\n    setAdd(state,payload){\n      state.add = payload\n    },\n    setAllActors(state,payload){\n      state.allActors = payload\n    }\n  },\n  actions: {\n    async getFilms({ commit }) {\nawait fetch(`http://127.0.0.1:8080/films`, {\n              method: 'GET',\n            });\n\n            commit('setFilms',[])\n    },\n    async getActors({ commit },payload) {\n      const response = await fetch(`http://127.0.0.1:8080/actors?filmId=${payload.filmId}`, {\n              method: 'GET',\n            });\n            let res = await response.json()\n            console.log(res)\n            commit('setActors',res)\n    },\n    async getAllActors({ commit }) {\n      const response = await fetch(`http://127.0.0.1:8080/actors`, {\n              method: 'GET',\n            });\n            let res = await response.json()\n            console.log(res)\n            commit('setAllActors',res)\n    },\n    async addNew({commit},payload) {\n\n      const response = await fetch(`http://127.0.0.1:8080/films`, {\n              method: \"POST\",\n              headers: { \"Content-Type\": \"application/json\" },\n              body: JSON.stringify({\n                film_name:payload.name,\n                filming_procentage:payload.procentage,\n                genre:payload.genre,\n                dauration:payload.duration,\n                rating:payload.rating,\n                budget_num:payload.budget,\n                box_office_num:payload.box_office,\n                film_date:payload.date,\n              }),\n            });\n            let res = await response.json()\n            if(res.detail != \"Name nust be unique\"){\n              alert(\"New film added\")\n              commit('setAdd',1)\n            }else{\n              alert(\"Name nust be unique\")\n            }\n      \n    },\n  },\n  modules: {\n  }\n})\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}